source('~/covid/publica/fasecero.github.io/scripts/grafico10.r')
source('~/covid/prediccion.r')
graficoProyeccion
source('~/covid/publica/fasecero.github.io/scripts/grafico10.r')
datoscovidok$tasaDiaria <- with(datoscovidok, (casesAcum/(casesAcum - casesAcumSemana))^(1/7)-1);
require("ggrepel");
set.seed(42);
ggplot(
#data = datoscovidok[datoscovidok$countriesAndTerritories == 'Argentina',],
data = datoscovidok[datoscovidok$countriesAndTerritories == 'Ecuador',],
mapping = aes(
x = realDate
)) +
geom_line(aes(y = casesAcum, colour = 'Casos')) +
geom_line(aes(y = tasaDiaria*10000, colour = 'Tasa')) +
geom_point(aes(y=casesAcum, colour = 'Casos')) +
geom_point(aes(y = tasaDiaria*10000, colour = 'Tasa')) +
scale_y_continuous(sec.axis = sec_axis(~./10000, name = "Tasa", labels = scales::percent_format(accuracy = 1))) +
theme(
legend.position="bottom",
legend.title  = element_blank()) +
labs(y = 'Casos confirmados') +
coord_cartesian(xlim = c(as.Date('2020-03-15'), max(ultimaFecha)))
datoscovidok$tasaDiaria <- with(datoscovidok, (casesAcum/(casesAcum - casesAcumSemana))^(1/7)-1);
require("ggrepel");
set.seed(42);
ggplot(
#data = datoscovidok[datoscovidok$countriesAndTerritories == 'Argentina',],
data = datoscovidok[datoscovidok$countriesAndTerritories == 'Ecuador',],
mapping = aes(
x = realDate
)) +
geom_line(aes(y = casesAcum, colour = 'Casos')) +
geom_line(aes(y = tasaDiaria*10000, colour = 'Tasa')) +
geom_point(aes(y=casesAcum, colour = 'Casos')) +
geom_point(aes(y = tasaDiaria*10000, colour = 'Tasa')) +
scale_y_continuous(sec.axis = sec_axis(~./10000, name = "Tasa", labels = scales::percent_format(accuracy = 1))) +
theme(
legend.position="bottom",
legend.title  = element_blank()) +
labs(y = 'Casos confirmados') +
coord_cartesian(xlim = c(as.Date('2020-03-15'), max(ultimaFecha))) +
geom_text_repel(aes(y = tasaDiaria*10000, label = sprintf("%1.1f%%", 100*tasaDiaria), colour = 'Tasa'), vjust = "inward", hjust = "inward", size=3)
head(datoscovidok[datoscovidok$countriesAndTerritories == 'Ecuador',])
